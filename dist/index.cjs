var g=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var o=(r,t)=>g(r,"name",{value:t,configurable:!0});var y=(r,t)=>{for(var e in t)g(r,e,{get:t[e],enumerable:!0})},L=(r,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of z(t))!M.call(r,i)&&i!==e&&g(r,i,{get:()=>t[i],enumerable:!(s=k(t,i))||s.enumerable});return r};var T=r=>L(g({},"__esModule",{value:!0}),r);var C={};y(C,{SearchExcerptGenerator:()=>u,Section:()=>f,stopWordFilter:()=>x});module.exports=T(C);function w(r,t,e,s){if(t.length===0)return W(r,e-3)+"…";let i=r.match(/\S+/g)||[],n=new f(t[0],i,s),a;for(let h=1,l=t.length;h<l&&(a=n.join(new f(t[h],i,s)),!(a.length()>e));h++)n=a;return n.toHTML()}o(w,"excerptFromArr");function m(r){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(r).replace(/[&<>"'\/]/g,e=>t[e])}o(m,"escapeHtml");function p(r){return(r.match(/[a-z].*[a-z]/)||[])[0]}o(p,"stripTrailingLeadingPunctuation");function W(r,t){let e=r.match(/\S+/g)||[],s=0;if(e.length===0)return"No content";for(var i=0,n=e.length;i<n;i++){if(e[i].length+s>t)return e.slice(0,i).join(" ");s+=e[i].length}return e.join(" ")}o(W,"getWholeWordsWithMaxChars");function x(r){return["aan","af","al","als","bij","dan","dat","de","die","dit","een","en","er","had","heb","hem","het","hier","hij","hoe","ik","in","is","je","kan","me","men","met","mij","nog","nu","of","ons","ook","te","tot","uit","van","veel","voor","was","wat","we","wel","wij","zal","ze","zei","zelf","zich","zo","zou"].includes(r)?r:!1}o(x,"stopWordFilter");function v(){for(let r=1;r<arguments.length;r++)for(let t in arguments[r])arguments[r].hasOwnProperty(t)&&(arguments[0][t]=arguments[r][t]);return arguments[0]}o(v,"extend");var u=class{constructor(t,e,s){let i=t.toLowerCase().match(/\S+/g)||[],n=[],a,h;for(let l=0,d=i.length;l<d;l++)if(a=p(i[l]),!!a){h=a.match(/[a-z]+[:\-][a-z]+/)||[a];for(let c=0,j=h.length;c<j;c++)a=x(h[c]),a!==!1&&n.push(a)}this.contextOptions=v({words:4,regex:null},s),this.tokens=n,this.maxLength=e}generateExcerpt(t){if(this.tokens.length===0)return w(t,[],this.maxLength);let e=[],s,i,n=t.toLowerCase().match(/\S+/g)||[];for(let a=0,h=n.length;a<h;a++)if(s=p(n[a]),!!s){i=s.match(/[a-z]+[:\-][a-z]+/)||[s];for(let l=0,d=i.length;l<d;l++)if(s=i[l],s&&this.tokens.indexOf(s)>-1){e.push(a);break}}return w(t,e,this.maxLength,this.contextOptions)}};o(u,"SearchExcerptGenerator");var f=class{constructor(t,e,s){if(typeof t<"u"){if(s.regex){let i={},n={};s.regex.start&&s.regex.finish?["start","finish"].forEach(h=>{s.regex[h].hasOwnProperty("regex")?(i[h]=s.regex[h].regex,n[h]=s.regex[h].include,n[h]=typeof n[h]>"u"?!0:n[h]):(i[h]=s.regex[h],n[h]=!0)}):s.regex.hasOwnProperty("regex")?(i.start=i.finish=s.regex.regex,n.start=s.regex.include,n.start=typeof n.start>"u"?!0:n.start,n.finish=n.start):(i.start=i.finish=s.regex,n.start=n.finish=!0);let a=e.slice(0,t).reverse().findIndex(h=>h.match(i.start));a>-1?this.start=t-a-(n.start?1:0):this.start=0,a=e.slice(t+1).findIndex(h=>h.match(i.finish)),a>-1?this.finish=t+1+a+(n.finish?1:0):this.finish=e.length}else this.start=Math.max(t-s.words,0),this.finish=Math.min(t+s.words+1,e.length);this.words=e.slice(this.start,this.finish),this.indicies=[t-this.start]}}append(t){this.finish>=t.start?this.words=this.words.slice(0,this.words.length-(this.finish-t.start)):this.words.push("…");for(let e=0,s=t.indicies;e<s;e++)this.indicies.push(t.indicies[e]+this.words.length);this.words=this.words.concat(t.words),this.finish=t.finish}join(t){let e=this.deepCopy();return e.append(t),e}length(){let t=this.words.length-1;for(let e=0,s=this.words.length;e<s;e++)t+=this.words[e].length;return t}toHTML(){let t=this.start===0?"":"…";for(let e=0,s=this.words.length;e<s;e++)this.indicies.indexOf(e)>-1?t+=" <strong>"+m(this.words[e])+"</strong>":t+=" "+m(this.words[e]);return t.trim()+" …"}deepCopy(){let t=new f;return t.start=this.start,t.finish=this.finish,t.words=this.words.slice(0),t.indicies=this.indicies.slice(0),t}};o(f,"Section");
