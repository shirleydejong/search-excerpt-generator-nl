var x=Object.defineProperty;var o=(a,t)=>x(a,"name",{value:t,configurable:!0});function c(a,t,e,s){if(t.length===0)return j(a,e-3)+"…";let n=a.match(/\S+/g)||[],i=new f(t[0],n,s),h;for(let r=1,l=t.length;r<l&&(h=i.join(new f(t[r],n,s)),!(h.length()>e));r++)i=h;return i.toHTML()}o(c,"excerptFromArr");function w(a){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};return String(a).replace(/[&<>"'\/]/g,e=>t[e])}o(w,"escapeHtml");function m(a){return(a.match(/[a-z].*[a-z]/)||[])[0]}o(m,"stripTrailingLeadingPunctuation");function j(a,t){let e=a.match(/\S+/g)||[],s=0;if(e.length===0)return"No content";for(var n=0,i=e.length;n<i;n++){if(e[n].length+s>t)return e.slice(0,n).join(" ");s+=e[n].length}return e.join(" ")}o(j,"getWholeWordsWithMaxChars");function k(a){return["aan","af","al","als","bij","dan","dat","de","die","dit","een","en","er","had","heb","hem","het","hier","hij","hoe","ik","in","is","je","kan","me","men","met","mij","nog","nu","of","ons","ook","te","tot","uit","van","veel","voor","was","wat","we","wel","wij","zal","ze","zei","zelf","zich","zo","zou"].includes(a)?!1:a}o(k,"stopWordFilter");function z(){for(let a=1;a<arguments.length;a++)for(let t in arguments[a])arguments[a].hasOwnProperty(t)&&(arguments[0][t]=arguments[a][t]);return arguments[0]}o(z,"extend");var d=class{constructor(t,e,s){let n=t.toLowerCase().match(/\S+/g)||[],i=[],h,r;for(let l=0,g=n.length;l<g;l++)if(h=m(n[l]),!!h){r=h.match(/[a-z]+[:\-][a-z]+/)||[h];for(let u=0,p=r.length;u<p;u++)h=k(r[u]),h!==!1&&i.push(h)}this.contextOptions=z({words:4,regex:null},s),this.tokens=i,this.maxLength=e}generateExcerpt(t){if(this.tokens.length===0)return c(t,[],this.maxLength);let e=[],s,n,i=t.toLowerCase().match(/\S+/g)||[];for(let h=0,r=i.length;h<r;h++)if(s=m(i[h]),!!s){n=s.match(/[a-z]+[:\-][a-z]+/)||[s];for(let l=0,g=n.length;l<g;l++)if(s=n[l],s&&this.tokens.indexOf(s)>-1){e.push(h);break}}return c(t,e,this.maxLength,this.contextOptions)}};o(d,"SearchExcerptGenerator");var f=class{constructor(t,e,s){if(typeof t<"u"){if(s.regex){let n={},i={};s.regex.start&&s.regex.finish?["start","finish"].forEach(r=>{s.regex[r].hasOwnProperty("regex")?(n[r]=s.regex[r].regex,i[r]=s.regex[r].include,i[r]=typeof i[r]>"u"?!0:i[r]):(n[r]=s.regex[r],i[r]=!0)}):s.regex.hasOwnProperty("regex")?(n.start=n.finish=s.regex.regex,i.start=s.regex.include,i.start=typeof i.start>"u"?!0:i.start,i.finish=i.start):(n.start=n.finish=s.regex,i.start=i.finish=!0);let h=e.slice(0,t).reverse().findIndex(r=>r.match(n.start));h>-1?this.start=t-h-(i.start?1:0):this.start=0,h=e.slice(t+1).findIndex(r=>r.match(n.finish)),h>-1?this.finish=t+1+h+(i.finish?1:0):this.finish=e.length}else this.start=Math.max(t-s.words,0),this.finish=Math.min(t+s.words+1,e.length);this.words=e.slice(this.start,this.finish),this.indicies=[t-this.start]}}append(t){this.finish>=t.start?this.words=this.words.slice(0,this.words.length-(this.finish-t.start)):this.words.push("…");for(let e=0,s=t.indicies;e<s;e++)this.indicies.push(t.indicies[e]+this.words.length);this.words=this.words.concat(t.words),this.finish=t.finish}join(t){let e=this.deepCopy();return e.append(t),e}length(){let t=this.words.length-1;for(let e=0,s=this.words.length;e<s;e++)t+=this.words[e].length;return t}toHTML(){let t=this.start===0?"":"…";for(let e=0,s=this.words.length;e<s;e++)this.indicies.indexOf(e)>-1?t+=" <strong>"+w(this.words[e])+"</strong>":t+=" "+w(this.words[e]);return t.trim()+" …"}deepCopy(){let t=new f;return t.start=this.start,t.finish=this.finish,t.words=this.words.slice(0),t.indicies=this.indicies.slice(0),t}};o(f,"Section");export{d as SearchExcerptGenerator,f as Section,k as stopWordFilter};
